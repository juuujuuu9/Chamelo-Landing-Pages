{{ 'index-collection-cards-new.css' | asset_url | stylesheet_tag }}

{%- if section.blocks.size > 0 -%}
  <div class="Index_collection_cards_main_new">
    <div class="Index_collection_cards_grid_new Desktop_only_new">
      {%- for block in section.blocks -%}
        <div class="Index_collection_cards_card_new" {{ block.shopify_attributes }}>
          {%- if block.settings.link != blank -%}
            <a href="{{ block.settings.link }}" class="Index_collection_cards_card_link_new">
          {%- endif -%}
            <div class="Index_collection_cards_card_bg_new">
              {%- if block.settings.image != blank -%}
                {{
                  block.settings.image |
                  image_url: width: 900 |
                  image_tag: widths: '450, 600, 900',
                  fetchpriority: 'auto',
                  class: 'Index_collection_cards_card_img_new'
                }}
              {%- endif -%}
            </div>
            {%- if block.settings.title != blank -%}
              <div class="Index_collection_cards_card_label_new">
                <span>{{ block.settings.title }}</span>
              </div>
            {%- endif -%}
          {%- if block.settings.link != blank -%}
            </a>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>

    <div class="Index_collection_cards_swiper_new Mobile_only_new swiper" id="collection-cards-{{ section.id }}">
      <div class="swiper-wrapper">
        {%- for block in section.blocks -%}
          <div class="swiper-slide Index_collection_cards_card_new" {{ block.shopify_attributes }}>
            {%- if block.settings.link != blank -%}
              <a href="{{ block.settings.link }}" class="Index_collection_cards_card_link_new">
            {%- endif -%}
              <div class="Index_collection_cards_card_bg_new">
                {%- if block.settings.image != blank -%}
                  {{
                    block.settings.image |
                    image_url: width: 750 |
                    image_tag: widths: '375, 500, 750',
                    fetchpriority: 'auto',
                    class: 'Index_collection_cards_card_img_new'
                  }}
                {%- endif -%}
              </div>
              {%- if block.settings.title != blank -%}
                <div class="Index_collection_cards_card_label_new">
                  <span>{{ block.settings.title }}</span>
                </div>
              {%- endif -%}
            {%- if block.settings.link != blank -%}
              </a>
            {%- endif -%}
          </div>
        {%- endfor -%}
      </div>
    </div>

    <div class="Index_collection_cards_overlay_new">
      <div class="Index_collection_cards_overlay_inner_new">
        {%- if section.settings.heading_small != blank -%}
          <p class="Index_collection_cards_overlay_small_new">{{ section.settings.heading_small }}</p>
        {%- endif -%}
        {%- if section.settings.heading_large != blank -%}
          <h2 class="Index_collection_cards_overlay_large_new">{{ section.settings.heading_large }}</h2>
        {%- endif -%}
        <div class="Index_collection_cards_overlay_cta_new">
          {%- if section.settings.subtitle != blank -%}
            <p class="Index_collection_cards_overlay_subtitle_new">{{ section.settings.subtitle }}</p>
          {%- endif -%}
          {%- if section.settings.button_text != blank and section.settings.button_link != blank -%}
            <a href="{{ section.settings.button_link }}" class="Index_collection_cards_overlay_link_new">
              <span>{{ section.settings.button_text }}</span>
              <span class="Index_collection_cards_overlay_link_underline_new"></span>
            </a>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof Swiper !== 'undefined') {
        new Swiper('#collection-cards-{{ section.id }}', {
          slidesPerView: 1.1,
          spaceBetween: 0,
          centeredSlides: false
        });
      }
    });
  </script>
{%- endif -%}

{% schema %}
  {
    "name": "Index Collection Cards",
    "class": "Index_collection_cards_section_new",
    "settings": [
      {
        "type": "text",
        "id": "heading_small",
        "label": "Small Heading",
        "default": "Shop by"
      },
      {
        "type": "textarea",
        "id": "heading_large",
        "label": "Large Heading",
        "default": "Collections"
      },
      {
        "type": "text",
        "id": "subtitle",
        "label": "Subtitle",
        "default": "Not sure which one's right for you?"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Button Text",
        "default": "Shop all styles"
      },
      {
        "type": "url",
        "id": "button_link",
        "label": "Button Link"
      }
    ],
    "blocks": [
      {
        "type": "collection_card",
        "name": "Collection Card",
        "limit": 3,
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Background Image"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Collection"
          },
          {
            "type": "url",
            "id": "link",
            "label": "Link"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Index Collection Cards",
        "blocks": [
          { "type": "collection_card" },
          { "type": "collection_card" },
          { "type": "collection_card" }
        ]
      }
    ]
  }
{% endschema %}
